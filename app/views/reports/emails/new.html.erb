<h1 class="d-flex align-items-center gap-2 mb-2">
  <span aria-hidden="true">📧</span>
  <span>メール送信</span>
</h1>
<p class="text-muted mb-4">
  宛先・件名・本文を確認して、<span class="fw-semibold">「この内容で送信」</span>を押すとメールが送信されます。
</p>

<div class="card border-0 bg-light mb-4">
  <div class="card-body py-3">
    <div class="small text-muted mb-1">送信対象の日報</div>
    <div class="d-flex flex-wrap align-items-center gap-2">
      <span class="fw-bold"><%= @report.title %></span>
      <span class="badge bg-secondary-subtle text-secondary border">
        <%= @report.created_at.strftime('%Y/%m/%d %H:%M') %>
      </span>
    </div>
  </div>
</div>

<%= form_with url: report_emails_path(@report), method: :post, local: true do %>
  <div class="mb-3">
    <label class="form-label">宛先 (To) <span class="badge text-bg-danger">必須</span></label>
    <%= text_field_tag 'email[to]', @to,
          class: "form-control", required: true,
          placeholder: "example@company.com（カンマ区切りで複数可）" %>
    <div class="form-text">例）user1@example.com, user2@example.com</div>
  </div>

  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Cc</label>
      <%= text_field_tag 'email[cc]', @cc, class: "form-control", placeholder: "任意（カンマ区切りで複数可）" %>
    </div>
    <div class="col-md-6">
      <label class="form-label">Bcc</label>
      <%= text_field_tag 'email[bcc]', @bcc, class: "form-control", placeholder: "任意（カンマ区切りで複数可）" %>
    </div>
  </div>

  <div class="mt-3 mb-3">
    <label class="form-label">件名 <span class="badge text-bg-danger">必須</span></label>
    <%= text_field_tag 'email[subject]', @subject, class: "form-control", required: true %>
  </div>

  <div class="mb-4">
    <label class="form-label">本文 <span class="badge text-bg-secondary">自動入力</span></label>
    <%= text_area_tag 'email[body]', @body, class: "form-control", rows: 12 %>
    <div class="form-text">
      この本文には日報の内容と作成日時が含まれています。必要に応じて修正してください。
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center">
    <%= link_to '← 一覧に戻る', reports_path, class: "btn btn-outline-secondary" %>
    <%= submit_tag '📧 この内容で送信', class: "btn btn-success btn-lg px-4", data: { turbo: false } %>
  </div>
<% end %>
